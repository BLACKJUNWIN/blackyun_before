{"remainingRequest":"D:\\BlackJun\\2021\\program\\webstrom\\yun\\node_modules\\babel-loader\\lib\\index.js!D:\\BlackJun\\2021\\program\\webstrom\\yun\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\BlackJun\\2021\\program\\webstrom\\yun\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\BlackJun\\2021\\program\\webstrom\\yun\\src\\views\\home.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\BlackJun\\2021\\program\\webstrom\\yun\\src\\views\\home.vue","mtime":1659341119666},{"path":"D:\\BlackJun\\2021\\program\\webstrom\\yun\\babel.config.js","mtime":1659339967320},{"path":"D:\\BlackJun\\2021\\program\\webstrom\\yun\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659339948891},{"path":"D:\\BlackJun\\2021\\program\\webstrom\\yun\\node_modules\\babel-loader\\lib\\index.js","mtime":1659339950602},{"path":"D:\\BlackJun\\2021\\program\\webstrom\\yun\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659339948891},{"path":"D:\\BlackJun\\2021\\program\\webstrom\\yun\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1659339949079}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXBsb2FkIH0gZnJvbSAiLi4vbmV0L2hvbWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImhvbWUiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFBhY2s6ICcnLAogICAgICB1cGxvYWQ6ICcnLAogICAgICB1cGxvYWRTaXplOiAwCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICAnJHN0b3JlLnN0YXRlLnVwbG9hZFNpemUnOiBmdW5jdGlvbiAoZGF0YSkgewogICAgICB0aGlzLnVwbG9hZFNpemUgPSBNYXRoLnJvdW5kKGRhdGEgLyB0aGlzLnVwbG9hZC5zaXplICogMTAwKTsKCiAgICAgIGlmICh0aGlzLnVwbG9hZFNpemUgPj0gMTAwKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ0aXAiLCB7CiAgICAgICAgICBjb2RlOiAiMjAwIiwKICAgICAgICAgIG1lc3NhZ2U6ICLmlofku7bkuIvovb3lrozmiJAiCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudXBsb2FkU2l6ZSA9IDA7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHVwbG9hZEZpbGU6IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IHdpbmRvdy5Gb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXBsb2FkJykuZmlsZXNbMF0pOwoKICAgICAgaWYgKGZvcm1EYXRhLmdldCgiZmlsZSIpLnNpemUgLyAxMDI0ID4gMTAyNCAqIDIpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInRpcCIsIHsKICAgICAgICAgIGNvZGU6ICI1MDAiLAogICAgICAgICAgbWVzc2FnZTogIuaWh+S7tuWkp+Wwj+i2hei/hzJNIgogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBsb2FkID0gewogICAgICAgICAgZmlsZU5hbWU6IGZvcm1EYXRhLmdldCgiZmlsZSIpLm5hbWUsCiAgICAgICAgICBzaXplOiBmb3JtRGF0YS5nZXQoImZpbGUiKS5zaXplCiAgICAgICAgfTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGVQYXRoIiwgIm51bGwiKTsKICAgICAgICBsZXQgcmVzID0gYXdhaXQgdXBsb2FkKGZvcm1EYXRhKTsKICAgICAgfQogICAgfSwKCiAgICBjbGlja1VwbG9hZCgpIHsKICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIikpIHsKICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZEZpbGUuY2xpY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInRpcCIsIHsKICAgICAgICAgIGNvZGU6IDUwMCwKICAgICAgICAgIG1lc3NhZ2U6ICLor7flhYjnmbvlvZUiCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AAsBA,SAAQA,MAAR,QAAqB,aAArB;AACA,eAAe;EACbC,IAAI,EAAE,MADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,WAAW,EAAC,EADP;MAELH,MAAM,EAAC,EAFF;MAGLI,UAAU,EAAC;IAHN,CAAP;EAKD,CARY;;EASbC,KAAK,EAAC;IACJ,2BAA0B,UAAUH,IAAV,EAAe;MACvC,KAAKE,UAAL,GAAgBE,IAAI,CAACC,KAAL,CAAWL,IAAI,GAAE,KAAKF,MAAL,CAAYQ,IAAlB,GAAwB,GAAnC,CAAhB;;MACA,IAAG,KAAKJ,UAAL,IAAiB,GAApB,EAAwB;QACtB,KAAKK,MAAL,CAAYC,MAAZ,CAAmB,KAAnB,EAAyB;UAACC,IAAI,EAAC,KAAN;UAAYC,OAAO,EAAC;QAApB,CAAzB;QACA,KAAKH,MAAL,CAAYI,KAAZ,CAAkBT,UAAlB,GAA6B,CAA7B;MACF;IACF;EAPI,CATO;EAkBbU,OAAO,EAAE;IACPC,UAAU,EAAE,kBAAkB;MAC1B,IAAIC,QAAO,GAAI,IAAIC,MAAM,CAACC,QAAX,EAAf;MACAF,QAAQ,CAACG,MAAT,CAAgB,MAAhB,EAAwBC,QAAQ,CAACC,aAAT,CAAuB,SAAvB,EAAkCC,KAAlC,CAAwC,CAAxC,CAAxB;;MACA,IAAIN,QAAQ,CAACO,GAAT,CAAa,MAAb,EAAqBf,IAArB,GAA0B,IAA1B,GAA+B,OAAK,CAAxC,EAA0C;QACxC,KAAKC,MAAL,CAAYC,MAAZ,CAAmB,KAAnB,EAAyB;UAACC,IAAI,EAAC,KAAN;UAAYC,OAAO,EAAC;QAApB,CAAzB;MACD,CAFD,MAEK;QACH,KAAKZ,MAAL,GAAY;UACVwB,QAAQ,EAACR,QAAQ,CAACO,GAAT,CAAa,MAAb,EAAqBtB,IADpB;UAEVO,IAAI,EAACQ,QAAQ,CAACO,GAAT,CAAa,MAAb,EAAqBf;QAFhB,CAAZ;QAIAQ,QAAQ,CAACG,MAAT,CAAgB,UAAhB,EAA4B,MAA5B;QACA,IAAIM,GAAE,GAAI,MAAMzB,MAAM,CAACgB,QAAD,CAAtB;MACF;IAEH,CAfM;;IAgBPU,WAAW,GAAE;MACX,IAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAH,EAAmC;QACjC,KAAKC,KAAL,CAAWd,UAAX,CAAsBe,KAAtB;MACD,CAFD,MAEK;QACH,KAAKrB,MAAL,CAAYC,MAAZ,CAAmB,KAAnB,EAAyB;UAACC,IAAI,EAAC,GAAN;UAAUC,OAAO,EAAC;QAAlB,CAAzB;QACA,KAAKmB,OAAL,CAAaC,IAAb,CAAkB,QAAlB;MACF;IACD;;EAvBM;AAlBI,CAAf","names":["upload","name","data","currentPack","uploadSize","watch","Math","round","size","$store","commit","code","message","state","methods","uploadFile","formData","window","FormData","append","document","querySelector","files","get","fileName","res","clickUpload","sessionStorage","getItem","$refs","click","$router","push"],"sourceRoot":"","sources":["D:\\BlackJun\\2021\\program\\webstrom\\yun\\src\\views\\home.vue"],"sourcesContent":["<template>\n  <div style=\"min-width: 1500px;margin-top:50px;min-height: 500px\" >\n    <div style=\"text-align: center;font-size: 40px;letter-spacing: 15px;\"><strong>黑盘不<strong style=\"color: white;background-color: black;letter-spacing: normal;padding:5px 10px;border-radius: .3em\">黑</strong>&nbsp;&nbsp;只为初心</strong></div>\n    <div style=\"text-align: center;font-size: 16px;color: #a7adad;margin-top:25px\"><strong>在线免费云盘,不限制网速,支持大部分文件在线预览,文件上传下载,1~5M/基本上传下载速度.</strong></div>\n    <div style=\"width:50%;height:400px;margin:50px auto 20px auto;box-shadow: 0 0 8px rgba(128,128,128,0.51);border-radius: 1.5em;z-index: 10\">\n      <div style=\"margin:0 auto;width:300px;height: 150px;position:relative;top:120px\">\n        <input type=\"file\" id=\"upload\" style=\"display: none\" ref=\"uploadFile\" @change=\"uploadFile\"/>\n        <el-button type=\"primary\" style=\"width:300px;height: 150px;border-radius: 1em;font-size: 28px;font-weight: bold\" icon=\"el-icon-upload\" @click=\"clickUpload\">文件上传</el-button>\n        <div style=\"margin-top:20px;font-size: 16px;font-weight: bold;color: grey;text-align: center\"><i class=\"el-icon-s-opportunity\" style=\"font-size:30px;color: #43a1fd;position:relative;top:3px\"></i>文件会被放入临时文件夹</div>\n      </div>\n    </div>\n\n    <!--    上传进度条-->\n    <div v-if=\"$store.state.uploadSize\" style=\"position: fixed;z-index: 100;top:30px;width:300px;height: auto;right: 30px;background-color: white;border-radius: .6em;box-shadow: 0 0 5px grey;padding:20px 10px\">\n      <div style=\"font-size: 18px;font-weight: bold;margin:0 auto 20px auto;text-align: center\">{{upload.fileName}}</div>\n      <el-progress  style=\"margin:0 auto\" :text-inside=\"true\" :stroke-width=\"36\" :percentage=\"uploadSize\" status=\"success\" ></el-progress>\n    </div>\n    <!--    上传进度条-->\n  </div>\n</template>\n\n<script>\nimport {upload} from \"../net/home\";\nexport default {\n  name: \"home\",\n  data() {\n    return {\n      currentPack:'',\n      upload:'',\n      uploadSize:0\n    };\n  },\n  watch:{\n    '$store.state.uploadSize':function (data){\n      this.uploadSize=Math.round(data/(this.upload.size)*100);\n      if(this.uploadSize>=100){\n        this.$store.commit(\"tip\",{code:\"200\",message:\"文件下载完成\"})\n        this.$store.state.uploadSize=0;\n      }\n    }\n  },\n  methods: {\n    uploadFile: async function () {\n        let formData = new window.FormData;\n        formData.append(\"file\", document.querySelector('#upload').files[0]);\n        if (formData.get(\"file\").size/1024>1024*2){\n          this.$store.commit(\"tip\",{code:\"500\",message:\"文件大小超过2M\"})\n        }else{\n          this.upload={\n            fileName:formData.get(\"file\").name,\n            size:formData.get(\"file\").size\n          }\n          formData.append(\"filePath\", \"null\");\n          let res = await upload(formData);\n        }\n\n    },\n    clickUpload(){\n      if(sessionStorage.getItem(\"token\")){\n        this.$refs.uploadFile.click()\n      }else{\n        this.$store.commit(\"tip\",{code:500,message:\"请先登录\"})\n        this.$router.push(\"/login\")\n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}